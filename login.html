<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - SEOTIZE | AI SEO Platform</title>
    <meta name="description" content="Sign in to your SEOTIZE account and access powerful AI SEO tools to boost your website rankings.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#ffffff;--bg-light:#f8fafc;--bg-dark:#0f172a;--text:#1e293b;--text-light:#64748b;--text-muted:#94a3b8;--border:#e2e8f0;--primary:#2563eb;--card-bg:#ffffff;--nav-bg:rgba(255,255,255,0.95);--success:#059669;--error:#dc2626}
        body.dark{--bg:#0f172a;--bg-light:#1e293b;--text:#f1f5f9;--text-light:#cbd5e1;--text-muted:#94a3b8;--border:#334155;--card-bg:#1e293b;--nav-bg:rgba(15,23,42,0.95)}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;transition:all .3s ease;overflow:hidden;height:100%;}
        nav{position:fixed;top:0;width:100%;padding:.75rem 1.5rem;background:var(--nav-bg);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);z-index:100;transition:all .3s ease}
        nav>div{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
        .logo{font-size:1.3rem;font-weight:800;color:var(--primary);text-decoration:none}
        .nav-links{display:flex;list-style:none;gap:1.5rem}
        .nav-links a{text-decoration:none;color:var(--text);font-weight:500;transition:color .2s ease;font-size:.9rem}
        .nav-links a:hover{color:var(--primary)}
        .nav-actions{display:flex;gap:.75rem;align-items:center}
        .theme-toggle{background:var(--bg-light);border:1px solid var(--border);padding:.4rem;border-radius:6px;cursor:pointer;transition:all .2s ease;color:var(--text);font-size:.9rem}
        .theme-toggle:hover{transform:scale(1.05)}
        .mobile-menu-toggle{display:none;background:var(--bg-light);border:1px solid var(--border);padding:.4rem;border-radius:6px;cursor:pointer;color:var(--text);font-size:1rem}
        .main-container{height:100vh;display:flex;padding-top:60px;flex-direction:row;}
        .content-pane{flex:1;background:linear-gradient(135deg,var(--bg-light),var(--bg));display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem;overflow:hidden;}
        .login-pane{flex:1;background:var(--card-bg);display:flex;align-items:center;justify-content:center;padding:1rem;position:relative;overflow-y:auto}
        .content-showcase{text-align:center;max-width:450px;position:relative;z-index:10;margin-top: 60px}
        .showcase-image{width:clamp(200px,25vw,280px);height:clamp(200px,25vw,280px);border-radius:20px;margin-bottom:1.5rem;box-shadow:0 15px 30px rgba(37,99,235,.15);transition:all .4s ease;object-fit:cover}
        .showcase-title{font-size:clamp(1.8rem,4vw,2.2rem);font-weight:800;color:var(--text);margin-bottom:1rem;line-height:1.2}
        .showcase-text{font-size:clamp(1rem,2.5vw,1.1rem);color:var(--text-light);margin-bottom:1.5rem;min-height:50px;display:flex;align-items:center;justify-content:center}
        .typewriter-cursor{display:inline-block;width:2px;height:1.2em;background:var(--primary);margin-left:2px;animation:blink 1s infinite}
        @keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}
        .login-card{background:var(--card-bg);padding:clamp(1.5rem,4vw,2.5rem);border-radius:16px;border:1px solid var(--border);box-shadow:0 15px 25px rgba(0,0,0,.1);width:100%;max-width:400px;position:relative;margin:auto;}
        .login-header{text-align:center;margin-bottom:1.5rem}
        .login-header h1{font-size:clamp(1.6rem,4vw,2rem);font-weight:800;color:var(--text);margin-bottom:.5rem}
        .login-header p{color:var(--text-light);font-size:clamp(.9rem,2.5vw,1rem)}
        .form-group{margin-bottom:1.2rem;position:relative}
        .form-label{display:block;margin-bottom:.4rem;font-weight:600;color:var(--text);font-size:.85rem}
        .form-input{width:100%;padding:.9rem;border:2px solid var(--border);border-radius:8px;font-size:.95rem;background:var(--bg-light);color:var(--text);transition:all .3s ease}
        .form-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.1);background:var(--card-bg)}
        .form-input.error{border-color:var(--error);background:rgba(220,38,38,.05)}
        .form-input.success{border-color:var(--success);background:rgba(5,150,105,.05)}
        .input-icon{position:absolute;right:.8rem;top:50%;transform:translateY(-50%);color:var(--text-muted);font-size:.9rem}
        .input-icon.success{color:var(--success)}
        .input-icon.error{color:var(--error)}
        .captcha-container{margin:1rem 0;display:flex;justify-content:center}
        .form-options{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;font-size:.85rem}
        .remember-me{display:flex;align-items:center;gap:.4rem;cursor:pointer}
        .checkbox{width:14px;height:14px;border:2px solid var(--border);border-radius:4px;cursor:pointer;position:relative;transition:all .3s ease}
        .checkbox.checked{background:var(--primary);border-color:var(--primary)}
        .checkbox.checked::after{content:'âœ“';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-size:9px;font-weight:bold}
        .forgot-link{color:var(--primary);text-decoration:none;transition:color .2s ease}
        .forgot-link:hover{color:#1e40af}
        .login-btn{width:100%;padding:.9rem 1.5rem;background:var(--primary);color:white;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease}
        .login-btn:hover{background:#1e40af;transform:translateY(-1px)}
        .login-btn.loading{pointer-events:none;opacity:.8}
        .spinner{width:14px;height:14px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:spin 1s linear infinite;margin-right:.5rem}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .divider{display:flex;align-items:center;margin:1.5rem 0;color:var(--text-muted);font-size:.85rem}
        .divider::before,.divider::after{content:'';flex:1;height:1px;background:var(--border)}
        .divider span{padding:0 1rem}
        .social-btn{width:100%;padding:.8rem;background:var(--bg-light);border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;font-size:.85rem;font-weight:500;color:var(--text);text-decoration:none;margin-bottom:1rem}
        .social-btn:hover{background:var(--card-bg);border-color:var(--primary);transform:translateY(-1px)}
        .signup-link{text-align:center;color:var(--text-light);font-size:.85rem}
        .signup-link a{color:var(--primary);text-decoration:none;font-weight:600}
        .signup-link a:hover{color:#1e40af}
        .mobile-menu{position:fixed;top:0;left:-100%;width:80%;height:100vh;background:var(--card-bg);border-right:1px solid var(--border);transition:left .3s ease;z-index:200;padding:2rem}
        .mobile-menu.active{left:0}
        .mobile-menu-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}
        .mobile-menu-close{background:none;border:none;font-size:1.5rem;color:var(--text);cursor:pointer}
        .mobile-menu-links{list-style:none}
        .mobile-menu-links li{margin:1rem 0}
        .mobile-menu-links a{text-decoration:none;color:var(--text);font-size:1.125rem;font-weight:500;display:block;padding:.5rem 0}
        .mobile-menu-links a:hover{color:var(--primary)}
        .mobile-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:150;opacity:0;visibility:hidden;transition:all .3s ease}
        .mobile-overlay.active{opacity:1;visibility:visible}
        .notification{position:fixed;top:80px;right:1rem;padding:.8rem 1.2rem;border-radius:8px;color:white;font-weight:500;transform:translateX(100%);transition:transform .3s ease;z-index:1000;font-size:.9rem}
        .notification.success{background:var(--success)}
        .notification.error{background:var(--error)}
        .notification.show{transform:translateX(0)}
        @media(max-width:1200px)
        {
            .main-container{flex-direction:column}
            .login-pane{flex:1;height:100%;padding:1rem}
            .login-card{max-width:350px}
            .content-pane{display:none}
        }

        @media(max-width:768px)
        {
            .nav-links{display:none}
            .mobile-menu-toggle{display:block}

            .login-pane{height:100vh}
            .login-card{padding:1.5rem;margin-top:0}}
        @media(max-width:480px)
        {
            nav{padding:.5rem 1rem}
            .login-card{padding:1.2rem;max-width:90vw}
            .login-header h1{font-size:1.5rem}}
    </style>
</head>
<body>
    <nav><div><a href="index.html" class="logo">SEOTIZE</a><ul class="nav-links"><li><a href="index.html">Home</a></li><li><a href="index.html#features">Features</a></li><li><a href="index.html#about">About</a></li><li><a href="blogs.html">Blog</a></li></ul><div class="nav-actions"><button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button><button class="mobile-menu-toggle" onclick="toggleMobileMenu()">â˜°</button></div></div></nav>

    <div class="mobile-menu" id="mobileMenu"><div class="mobile-menu-header"><span class="logo">SEOTIZE</span><button class="mobile-menu-close" onclick="toggleMobileMenu()">âœ•</button></div><ul class="mobile-menu-links"><li><a href="index.html" onclick="toggleMobileMenu()">Home</a></li><li><a href="index.html#features" onclick="toggleMobileMenu()">Features</a></li><li><a href="index.html#about" onclick="toggleMobileMenu()">About</a></li><li><a href="blogs.html" onclick="toggleMobileMenu()">Blog</a></li></ul></div>
    <div class="mobile-overlay" id="mobileOverlay" onclick="toggleMobileMenu()"></div>

    <main class="main-container">
        <section class="content-pane">
            <div class="content-showcase">
                <img id="showcaseImage" class="showcase-image" src="https://image-worker.cranko.cloud/placeholder/280/280?text=Welcome&color=2563eb" alt="Welcome">
                <h1 class="showcase-title">Welcome Back to <span style="color: var(--primary);">SEOTIZE</span></h1>
                <div class="showcase-text" id="typewriterText">Your SEO dashboard awaits<span class="typewriter-cursor"></span></div>
            </div>
        </section>

        <section class="login-pane">
            <div class="login-card">
                <div class="login-header"><h1>Welcome Back</h1><p>Sign in to your SEOTIZE account</p></div>
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="email">Email Address</label>
                        <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
                        <div class="input-icon" id="emailIcon"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="password">Password</label>
                        <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
                        <div class="input-icon" id="passwordIcon"></div>
                    </div>
                    <div class="captcha-container">
                        <div class="cf-turnstile" data-sitekey="0x4AAAAAABi0oSEk-fxks-xg" data-callback="onCaptchaSuccess"></div>
                    </div>
                    <div class="form-options">
                        <label class="remember-me" onclick="toggleCheckbox()"><div class="checkbox" id="checkbox"></div><span>Remember me</span></label>
                        <a href="forgot-password.html" class="forgot-link">Forgot password?</a>
                    </div>
                    <button type="submit" class="login-btn" id="loginBtn">Sign In</button>
                </form>
                <div class="divider"><span>or continue with</span></div>
                <a href="https://api.seotize.net/login/google" class="social-btn"><span><svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
      <g clip-path="url(#clip0_320_591)">
        <path
                d="M11.9998 9.81812V14.4654H18.458C18.1744 15.9599 17.3234 17.2254 16.047 18.0763L19.9416 21.0982C22.2107 19.0037 23.5198 15.9273 23.5198 12.2728C23.5198 11.4219 23.4434 10.6036 23.3015 9.81825L11.9998 9.81812Z"
                fill="#4285F4"
        />
        <path
                d="M5.27468 14.2841L4.39631 14.9564L1.28717 17.3782C3.26171 21.2945 7.30868 24 11.9996 24C15.2395 24 17.9558 22.9309 19.9413 21.0983L16.0468 18.0764C14.9777 18.7964 13.614 19.2328 11.9996 19.2328C8.87957 19.2328 6.22874 17.1274 5.27958 14.291L5.27468 14.2841Z"
                fill="#34A853"
        />
        <path
                d="M1.28718 6.62183C0.469042 8.23631 0 10.0581 0 11.9999C0 13.9417 0.469042 15.7636 1.28718 17.378C1.28718 17.3889 5.27997 14.2799 5.27997 14.2799C5.03998 13.5599 4.89812 12.7963 4.89812 11.9998C4.89812 11.2033 5.03998 10.4398 5.27997 9.71976L1.28718 6.62183Z"
                fill="#FBBC05"
        />
        <path
                d="M11.9998 4.77818C13.7671 4.77818 15.338 5.38907 16.5925 6.56727L20.0289 3.13095C17.9452 1.18917 15.2398 0 11.9998 0C7.30893 0 3.26171 2.69454 1.28717 6.62183L5.27984 9.72001C6.22888 6.88362 8.87982 4.77818 11.9998 4.77818Z"
                fill="#EA4335"
        />
      </g>
      <defs>
        <clipPath id="clip0_320_591">
          <rect width="24" height="24" fill="white" />
        </clipPath>
      </defs>
    </svg></span>Sign In with Google</a>
                <div class="signup-link">Don't have an account? <a href="register.html">Sign up</a></div>
            </div>
        </section>
    </main>

    <div class="notification" id="notification"></div>

    <script>
        gsap.registerPlugin(TextPlugin);
        const API_BASE='https://api.seotize.net';
        const texts=['Your SEO dashboard awaits','Track rankings and boost traffic','AI-powered tools ready to work'];
        let currentText=0,isRemembered=false,captchaToken=null;

        function onCaptchaSuccess(token){captchaToken=token}

        function init(){
            gsap.fromTo('.content-showcase',{opacity:0,x:-30},{opacity:1,x:0,duration:.6});
            gsap.fromTo('.login-card',{opacity:0,x:30},{opacity:1,x:0,duration:.6,delay:.2});
            typeText();
            setInterval(()=>{currentText=(currentText+1)%texts.length;typeText()},4000)
        }

        function typeText(){
            const el=document.getElementById('typewriterText');
            el.innerHTML='<span class="typewriter-cursor"></span>';
            gsap.to(el,{duration:texts[currentText].length*.04,text:{value:texts[currentText]},onUpdate:()=>{if(!el.innerHTML.includes('typewriter-cursor'))el.innerHTML+='<span class="typewriter-cursor"></span>'}})
        }

        function validateField(input){
            const value=input.value.trim();
            const icon=input.nextElementSibling;
            if(input.type==='email'){
                const valid=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
                input.className=`form-input ${value?valid?'success':'error':''}`;
                icon.innerHTML=value?valid?'âœ“':'âœ—':'';
                icon.className=`input-icon ${value?valid?'success':'error':''}`
            }else{
                const valid=value.length>=8;
                input.className=`form-input ${value?valid?'success':'error':''}`;
                icon.innerHTML=value?valid?'âœ“':'âœ—':'';
                icon.className=`input-icon ${value?valid?'success':'error':''}`
            }
        }

        function toggleCheckbox(){
            isRemembered=!isRemembered;
            document.getElementById('checkbox').classList.toggle('checked',isRemembered)
        }

        async function handleLogin(e){
            e.preventDefault();
            const email=document.getElementById('email').value.trim();
            const password=document.getElementById('password').value.trim();
            const btn=document.getElementById('loginBtn');

            if(!email||!password){showNotification('Please fill in all fields','error');return}
            if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){showNotification('Invalid email','error');return}
            if(password.length<8){showNotification('Password too short','error');return}
            if(!captchaToken){showNotification('Please complete captcha','error');return}

            btn.classList.add('loading');
            btn.innerHTML='<div class="spinner"></div>Signing in...';

            try{
                const res=await fetch(`${API_BASE}/login`,{
                    method:'POST',
                    headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({email,password,'cf-turnstile-response':captchaToken})
                });
                const data=await res.json();

                btn.classList.remove('loading');
                btn.innerHTML='Sign In';

                if(data.status==='success'){
                    // If you want the "Remember me" checkbox to work, you can pass a number of days.
                    // For now, we'll create a session cookie that expires when the browser closes.
                    const duration = isRemembered ? 7 : null; // e.g., 7 days if remembered
                    setCookie('session_token', data.data.session_token, duration); 
                    showNotification('Login successful!','success');
                    setTimeout(()=>window.location.href='/dashboard',1000)
                }else{
                    showNotification(data.error?.message||'Login failed','error');
                    captchaToken=null;
                    if(window.turnstile)window.turnstile.reset()
                }
            }catch(err){
                btn.classList.remove('loading');
                btn.innerHTML='Sign In';
                showNotification('Network error','error');
                captchaToken=null;
                if(window.turnstile)window.turnstile.reset()
            }
        }

        function showNotification(msg,type){
            const n=document.getElementById('notification');
            n.textContent=msg;
            n.className=`notification ${type} show`;
            setTimeout(()=>n.classList.remove('show'),3000)
        }

        function toggleMobileMenu(){
            const menu=document.getElementById('mobileMenu');
            const overlay=document.getElementById('mobileOverlay');
            menu.classList.toggle('active');
            overlay.classList.toggle('active')
        }

        function toggleTheme(){
            document.body.classList.toggle('dark');
            const toggle=document.querySelector('.theme-toggle');
            const isDark=document.body.classList.contains('dark');
            toggle.textContent=isDark?'â˜€ï¸':'ðŸŒ™';
            localStorage.setItem('theme',isDark?'dark':'light')
        }

        function loadTheme(){
            if(localStorage.getItem('theme')==='dark'){
                document.body.classList.add('dark');
                document.querySelector('.theme-toggle').textContent='â˜€ï¸'
            }
        }

        document.getElementById('email').addEventListener('input',e=>validateField(e.target));
        document.getElementById('password').addEventListener('input',e=>validateField(e.target));
        document.getElementById('loginForm').addEventListener('submit',handleLogin);
        document.addEventListener('DOMContentLoaded',()=>{
    // First, check if the user is already logged in.
    if (getCookie('session_token')) {
        // If token exists, go directly to the dashboard.
        window.location.href = '/dashboard'; 
        return; // Stop further execution of login page scripts.
    }

    // If not logged in, proceed with loading the theme and animations.
    loadTheme();
    init();
});
    </script>
<script>
function setCookie(name, value, days) {
    let expires = "";
    if (days) {
        const date = new Date();
        // The dashboard script uses 'session_token', so we will set a session cookie (expires when browser closes)
        // by not setting an expiry date. If you wanted it to persist, you'd uncomment the next two lines.
        // date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        // expires = "; expires=" + date.toUTCString();
    }
    // Using SameSite=Lax for better security. Path=/ makes it available across the site.
    document.cookie = name + "=" + (value || "")  + expires + "; path=/; SameSite=Lax";
}

function getCookie(name) {
    const nameEQ = name + "=";
    const ca = document.cookie.split(';');
    for(let i=0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
</script>
</body>
</html>
